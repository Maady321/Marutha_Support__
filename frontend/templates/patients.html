<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Patients - Marutha Support</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../static/css/base.css" />
    <link rel="stylesheet" href="../static/css/components.css" />
    <link rel="stylesheet" href="../static/css/dashboard.css" />
  </head>
  <body>
    <div class="dashboard-container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <a href="dashboard_doctor.html" class="sidebar-brand">
          <img src="../static/images/logo.png" alt="Marutha Support Logo" />
          <span class="brand-text">Marutha Support</span>
        </a>

        <nav class="sidebar-nav">
          <a href="dashboard_doctor.html" class="sidebar-link">
            <i class="fas fa-th-large"></i>
            Dashboard
          </a>
          <a href="patients.html" class="sidebar-link active">
            <i class="fas fa-users"></i>
            Patients
          </a>
          <a href="requests.html" class="sidebar-link">
            <i class="fas fa-calendar-check"></i>
            Appointments
          </a>
          <a
            href="manage_records_doctor.html#consultations"
            class="sidebar-link"
          >
            <i class="fas fa-video"></i>
            Consultations
          </a>
          <a href="manage_records_doctor.html#records" class="sidebar-link">
            <i class="fas fa-clipboard-list"></i>
            Medical Records
          </a>
          <a
            href="manage_records_doctor.html#prescriptions"
            class="sidebar-link"
          >
            <i class="fas fa-prescription-bottle-alt"></i>
            Prescriptions
          </a>
          <a href="manage_records_doctor.html#reports" class="sidebar-link">
            <i class="fas fa-file-medical-alt"></i>
            Reports
          </a>
          <a href="chat_doctor.html" class="sidebar-link">
            <i class="fas fa-comment-medical"></i>
            Messages
          </a>
          <div style="flex-grow: 1"></div>
          <a
            href="manage_manage_profile_doctor.html#view#view"
            class="sidebar-link"
          >
            <i class="fas fa-cog"></i>
            Settings
          </a>
          <a
            href="login.html"
            class="sidebar-link"
            style="color: var(--danger)"
          >
            <i class="fas fa-sign-out-alt"></i>
            Logout
          </a>
        </nav>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Header -->
        <header class="top-header">
          <div>
            <h2
              style="
                font-size: 2rem;
                margin-bottom: 8px;
                display: flex;
                align-items: center;
                gap: 12px;
              "
            >
              <i
                class="fas fa-user-injured"
                style="color: var(--medical-blue); font-size: 1.8rem"
              ></i>
              My Patients
            </h2>
            <p style="color: var(--text-muted); font-weight: 500">
              Manage patient records and monitor care progress.
            </p>
          </div>
          <div class="profile-snippet">
            <div style="text-align: right">
              <div
                style="
                  font-weight: 700;
                  color: var(--medical-blue);
                  font-size: 0.95rem;
                "
              >
                ...
              </div>
              <div style="font-size: 0.75rem; color: var(--text-light)">
                ...
              </div>
            </div>
            <div
              class="profile-pic"
              style="background: var(--medical-blue); color: white"
            >
              ...
            </div>
          </div>
        </header>

        <div class="container" style="padding: 0 64px 64px">
          <!-- Actions & Search -->
          <div
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              margin-bottom: 32px;
            "
          >
            <div class="item-search" style="position: relative; width: 350px">
              <i
                class="fas fa-search"
                style="
                  position: absolute;
                  left: 16px;
                  top: 50%;
                  transform: translateY(-50%);
                  color: var(--text-light);
                "
              ></i>
              <input
                type="text"
                placeholder="Search patients by name or ID..."
                style="
                  width: 100%;
                  padding: 12px 12px 12px 48px;
                  border: 1px solid var(--medical-blue-light);
                  border-radius: 50px;
                  outline: none;
                  transition: all 0.3s ease;
                "
              />
            </div>
            <button class="btn btn-primary" onclick="openPatientModal()">
              <i class="fas fa-plus" style="margin-right: 8px"></i> Add New
              Patient
            </button>
          </div>

          <!-- Patients Table Card -->
          <div
            class="card fade-in"
            style="padding: 32px; border-top: 4px solid var(--medical-blue)"
          >
            <div class="table-container">
              <table class="custom-table">
                <thead>
                  <tr>
                    <th>Patient Name</th>
                    <th>Age / ID</th>
                    <th>Condition / Stage</th>
                    <th>Assigned Volunteer</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="patients-table-body">
                  <!-- JS Data -->
                </tbody>
              </table>
            </div>

            <!-- Pagination (Visual) -->
            <div
              style="
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-top: 24px;
                color: var(--text-muted);
                font-size: 0.9rem;
              "
            >
              <div id="patients-pagination-text"></div>
              <div style="display: flex; gap: 8px">
                <button class="btn btn-sm btn-outline-lavender" disabled>
                  Previous
                </button>
                <button class="btn btn-sm btn-outline-lavender">Next</button>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Add Patient Modal (Re-styled) -->
    <div
      id="addPatientModal"
      class="modal-overlay"
      style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(45, 74, 138, 0.4);
        backdrop-filter: blur(4px);
        z-index: 1000;
        align-items: center;
        justify-content: center;
      "
    >
      <div
        class="card fade-in"
        style="width: 100%; max-width: 500px; padding: 40px; position: relative"
      >
        <button
          onclick="closePatientModal(event)"
          style="
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.2rem;
            color: var(--text-light);
            cursor: pointer;
          "
        >
          <i class="fas fa-times"></i>
        </button>

        <h3 style="margin-bottom: 8px; color: var(--medical-blue)">
          Add New Patient
        </h3>
        <p style="color: var(--text-muted); margin-bottom: 24px">
          Enter the details to register a new patient.
        </p>

        <form onsubmit="closePatientModal(event)">
          <div class="form-group">
            <label>Full Name</label>
            <input
              type="text"
              placeholder="e.g. John Doe"
              required
              style="
                padding: 12px;
                border-radius: 8px;
                border: 1px solid var(--medical-blue-light);
                width: 100%;
              "
            />
          </div>
          <div class="form-group">
            <label>Email Address</label>
            <input
              type="email"
              placeholder="e.g. john@example.com"
              required
              style="
                padding: 12px;
                border-radius: 8px;
                border: 1px solid var(--medical-blue-light);
                width: 100%;
              "
            />
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px">
            <div class="form-group">
              <label>Age</label>
              <input
                type="number"
                placeholder="e.g. 45"
                required
                style="
                  padding: 12px;
                  border-radius: 8px;
                  border: 1px solid var(--medical-blue-light);
                  width: 100%;
                "
              />
            </div>
            <div class="form-group">
              <label>Gender</label>
              <select
                style="
                  padding: 12px;
                  border-radius: 8px;
                  border: 1px solid var(--medical-blue-light);
                  width: 100%;
                  background: white;
                "
              >
                <option value="">Select...</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
                <option value="other">Other</option>
              </select>
            </div>
          </div>

          <div style="margin-top: 32px; display: flex; gap: 16px">
            <button
              type="button"
              class="btn btn-outline-lavender"
              style="flex: 1"
              onclick="
                document.getElementById('addPatientModal').style.display =
                  'none'
              "
            >
              Cancel
            </button>
            <button type="submit" class="btn btn-primary" style="flex: 1">
              Add Patient
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Assign Volunteer Modal -->
    <div
      id="assignVolunteerModal"
      class="modal-overlay"
      style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(45, 74, 138, 0.4);
        backdrop-filter: blur(4px);
        z-index: 1000;
        align-items: center;
        justify-content: center;
      "
    >
      <div
        class="card fade-in"
        style="width: 100%; max-width: 400px; padding: 32px; position: relative"
      >
        <button
          onclick="closeAssignModal()"
          style="
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.2rem;
            color: var(--text-light);
            cursor: pointer;
          "
        >
          <i class="fas fa-times"></i>
        </button>

        <h3 style="margin-bottom: 8px; color: var(--medical-blue)">
          Assign Volunteer
        </h3>
        <p style="color: var(--text-muted); margin-bottom: 24px">
          Select a volunteer to support this patient.
        </p>

        <form
          onsubmit="
            handleAssignVolunteer(event);
            return false;
          "
        >
          <input type="hidden" id="assignPatientId" />
          <div class="form-group">
            <label style="display: block; margin-bottom: 8px; font-weight: 500"
              >Select Volunteer</label
            >
            <select
              id="volunteerSelect"
              required
              style="
                padding: 12px;
                border-radius: 8px;
                border: 1px solid var(--medical-blue-light);
                width: 100%;
                background: white;
              "
            >
              <option value="">Loading volunteers...</option>
            </select>
          </div>

          <div style="margin-top: 24px; display: flex; gap: 16px">
            <button
              type="button"
              class="btn btn-outline-lavender"
              style="flex: 1"
              onclick="closeAssignModal()"
            >
              Cancel
            </button>
            <button type="submit" class="btn btn-primary" style="flex: 1">
              Assign
            </button>
          </div>
        </form>
      </div>
    </div>

    <script src="../static/js/app.js"></script>
    <script src="../static/js/patients.js"></script>
  </body>
</html>
